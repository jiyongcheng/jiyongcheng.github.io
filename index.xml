<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>What, Why, How</title><link>https://jiyongcheng.dev/</link><description>Recent content on What, Why, How</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Fri, 07 Oct 2022 08:45:02 +1100</lastBuildDate><atom:link href="https://jiyongcheng.dev/index.xml" rel="self" type="application/rss+xml"/><item><title>Bash</title><link>https://jiyongcheng.dev/post/bash/</link><pubDate>Fri, 07 Oct 2022 08:45:02 +1100</pubDate><guid>https://jiyongcheng.dev/post/bash/</guid><description>&lt;h1 id="bash-备忘清单">Bash 备忘清单&lt;/h1>
&lt;p>这是开始使用 linux bash shell 脚本的快速参考备忘单。&lt;/p>
&lt;h2 id="入门">入门&lt;/h2>
&lt;h3 id="hellosh">hello.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;span class="cp">&lt;/span>&lt;span class="nv">VAR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;world&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello &lt;/span>&lt;span class="nv">$VAR&lt;/span>&lt;span class="s2">!&amp;#34;&lt;/span> &lt;span class="c1"># =&amp;gt; Hello world!&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行脚本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">$ bash hello.sh
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="变量">变量&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">NAME&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; John (变量)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$NAME&lt;/span> &lt;span class="c1"># =&amp;gt; John (变量)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$NAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># =&amp;gt; John (变量)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;$NAME&amp;#39;&lt;/span> &lt;span class="c1"># =&amp;gt; $NAME (确切的字符串)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">NAME&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">!&amp;#34;&lt;/span> &lt;span class="c1"># =&amp;gt; John! (变量)&lt;/span>
&lt;span class="nv">NAME&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span> &lt;span class="c1"># =&amp;gt; Error (关于空间)&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="注释">注释&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="c1"># 这是一个内联 Bash 注释。&lt;/span>
: &lt;span class="s1">&amp;#39;
&lt;/span>&lt;span class="s1">这是一个
&lt;/span>&lt;span class="s1">非常整洁的评论
&lt;/span>&lt;span class="s1">在 bash
&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>多行注释使用 &lt;code>:'&lt;/code> 打开和 &lt;code>'&lt;/code> 关闭&lt;/p>
&lt;h3 id="参数">参数&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2-->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表示&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$1&lt;/code> … &lt;code>$9&lt;/code>&lt;/td>
&lt;td>参数 1 &amp;hellip; 9&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$0&lt;/code>&lt;/td>
&lt;td>脚本本身的名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$1&lt;/code>&lt;/td>
&lt;td>第一个论点&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${10}&lt;/code>&lt;/td>
&lt;td>位置参数 10&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$#&lt;/code>&lt;/td>
&lt;td>参数数量&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$$&lt;/code>&lt;/td>
&lt;td>shell 的进程 id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$*&lt;/code>&lt;/td>
&lt;td>所有论据&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$@&lt;/code>&lt;/td>
&lt;td>所有参数，从第一个开始&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$-&lt;/code>&lt;/td>
&lt;td>当前选项&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$_&lt;/code>&lt;/td>
&lt;td>上一个命令的最后一个参数&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>见：&lt;a href="http://wiki.bash-hackers.org/syntax/shellvars#special_parameters_and_shell_variables">特殊参数&lt;/a>&lt;/p>
&lt;h3 id="函数">函数&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">get_name&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;You are &lt;/span>&lt;span class="k">$(&lt;/span>get_name&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>见：&lt;a href="#bash-%E5%87%BD%E6%95%B0">函数&lt;/a>&lt;/p>
&lt;h3 id="条件句">条件句&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$string&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;String is empty&amp;#34;&lt;/span>
&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$string&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;String is not empty&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>见：&lt;a href="#bash-%E6%9D%A1%E4%BB%B6%E5%8F%A5">条件句&lt;/a>&lt;/p>
&lt;h3 id="大括号扩展">大括号扩展&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="nb">echo&lt;/span> &lt;span class="o">{&lt;/span>A,B&lt;span class="o">}&lt;/span>.js
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表示&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>{A,B}&lt;/code>&lt;/td>
&lt;td>与 &lt;code>A B&lt;/code> 相同&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>{A,B}.js&lt;/code>&lt;/td>
&lt;td>与 &lt;code>A.js B.js&lt;/code> 相同&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>{1..5}&lt;/code>&lt;/td>
&lt;td>与 &lt;code>1 2 3 4 5&lt;/code> 相同&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>见：&lt;a href="http://wiki.bash-hackers.org/syntax/expansion/brace">大括号扩展&lt;/a>&lt;/p>
&lt;h3 id="shell-执行">Shell 执行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># =&amp;gt; I&amp;#39;m in /当前/的/路径&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;I&amp;#39;m in &lt;/span>&lt;span class="k">$(&lt;/span>PWD&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="c1"># Same as:&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;I&amp;#39;m in `pwd`&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>见：&lt;a href="http://wiki.bash-hackers.org/syntax/expansion/cmdsubst">命令替换&lt;/a>&lt;/p>
&lt;h2 id="bash-参数扩展">Bash 参数扩展&lt;/h2>
&lt;h3 id="语法">语法&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2-->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">代码&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO%suffix}&lt;/code>&lt;/td>
&lt;td>删除后缀&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO#prefix}&lt;/code>&lt;/td>
&lt;td>删除前缀&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO%%suffix}&lt;/code>&lt;/td>
&lt;td>去掉长后缀&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO##prefix}&lt;/code>&lt;/td>
&lt;td>删除长前缀&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO/from/to}&lt;/code>&lt;/td>
&lt;td>替换第一个匹配项&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO//from/to}&lt;/code>&lt;/td>
&lt;td>全部替换&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO/%from/to}&lt;/code>&lt;/td>
&lt;td>替换后缀&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO/#from/to}&lt;/code>&lt;/td>
&lt;td>替换前缀&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="子字符串">子字符串&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表示&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO:0:3}&lt;/code>&lt;/td>
&lt;td>子串 &lt;em>(位置，长度)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO:(-3):3}&lt;/code>&lt;/td>
&lt;td>从右边开始的子串&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="length">Length&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表示&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${#FOO}&lt;/code>&lt;/td>
&lt;td>&lt;code>$FOO&lt;/code> 的长度&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="默认值">默认值&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表示&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO:-val}&lt;/code>&lt;/td>
&lt;td>&lt;code>$FOO&lt;/code>，如果未设置，则为 &lt;code>val&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO:=val}&lt;/code>&lt;/td>
&lt;td>如果未设置，则将 &lt;code>$FOO&lt;/code> 设置为 &lt;code>val&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO:+val}&lt;/code>&lt;/td>
&lt;td>&lt;code>val&lt;/code> 如果设置了&lt;code>$FOO&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${FOO:?message}&lt;/code>&lt;/td>
&lt;td>如果 &lt;code>$FOO&lt;/code> 未设置，则显示消息并退出&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="替代-substitution">替代 Substitution&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">food&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">Cake&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1">#=&amp;gt; $food or &amp;#34;Cake&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">STR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/path/to/foo.cpp&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">%.cpp&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># /path/to/foo&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">%.cpp&lt;/span>&lt;span class="si">}&lt;/span>.o &lt;span class="c1"># /path/to/foo.o&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">%/*&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># /path/to&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">##*.&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># cpp (extension)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">##*/&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># foo.cpp (basepath)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">#*/&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># path/to/foo.cpp&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">##*/&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># foo.cpp&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">/foo/bar&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># /path/to/bar.cpp&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="切片-slicing">切片 Slicing&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; John&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; Jo&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; Jo&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">1&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; Joh&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">:(-1)&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; n&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">:(-2)&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; hn&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">:(-2):&lt;/span>&lt;span class="nv">2&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; hn&lt;/span>
&lt;span class="nv">length&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">length&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; Jo&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>见：&lt;a href="http://wiki.bash-hackers.org/syntax/pe">参数扩展&lt;/a>&lt;/p>
&lt;h3 id="基本路径和目录路径">基本路径和目录路径&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">SRC&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/path/to/foo.cpp&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">BASEPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">SRC&lt;/span>&lt;span class="p">##*/&lt;/span>&lt;span class="si">}&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$BASEPATH&lt;/span> &lt;span class="c1"># =&amp;gt; &amp;#34;foo.cpp&amp;#34;&lt;/span>
&lt;span class="nv">DIRPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">SRC&lt;/span>&lt;span class="p">%&lt;/span>&lt;span class="nv">$BASEPATH&lt;/span>&lt;span class="si">}&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$DIRPATH&lt;/span> &lt;span class="c1"># =&amp;gt; &amp;#34;/path/to/&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="transform">Transform&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">STR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;HELLO WORLD!&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; hELLO WORLD!&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">,,&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; hello world!&lt;/span>
&lt;span class="nv">STR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;hello world!&amp;#34;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">^&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; Hello world!&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">STR&lt;/span>&lt;span class="p">^^&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># =&amp;gt; HELLO WORLD!&lt;/span>
&lt;span class="nv">ARR&lt;/span>&lt;span class="o">=(&lt;/span>hello World&lt;span class="o">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ARR&lt;/span>&lt;span class="p">[@],&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># =&amp;gt; hello world&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ARR&lt;/span>&lt;span class="p">[@]^&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># =&amp;gt; Hello World&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-数组">Bash 数组&lt;/h2>
&lt;h3 id="定义数组">定义数组&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s1">&amp;#39;Apple&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Banana&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Orange&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
Fruits&lt;span class="o">[&lt;/span>0&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;Apple&amp;#34;&lt;/span>
Fruits&lt;span class="o">[&lt;/span>1&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;Banana&amp;#34;&lt;/span>
Fruits&lt;span class="o">[&lt;/span>2&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;Orange&amp;#34;&lt;/span>
&lt;span class="nv">ARRAY1&lt;/span>&lt;span class="o">=(&lt;/span>foo&lt;span class="o">{&lt;/span>1..2&lt;span class="o">})&lt;/span> &lt;span class="c1"># =&amp;gt; foo1 foo2&lt;/span>
&lt;span class="nv">ARRAY2&lt;/span>&lt;span class="o">=({&lt;/span>A..D&lt;span class="o">})&lt;/span> &lt;span class="c1"># =&amp;gt; A B C D&lt;/span>
&lt;span class="c1"># 合并 =&amp;gt; foo1 foo2 A B C D&lt;/span>
&lt;span class="nv">ARRAY3&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ARRAY1&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">ARRAY2&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="c1"># 声明构造&lt;/span>
&lt;span class="nb">declare&lt;/span> -a &lt;span class="nv">Numbers&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> 3&lt;span class="o">)&lt;/span>
&lt;span class="nv">Numbers&lt;/span>&lt;span class="o">+=(&lt;/span>&lt;span class="m">4&lt;/span> 5&lt;span class="o">)&lt;/span> &lt;span class="c1"># 附加 =&amp;gt; 1 2 3 4 5&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="索引">索引&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">:-&lt;/th>
&lt;th>-&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${Fruits[0]}&lt;/code>&lt;/td>
&lt;td>第一个元素&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${Fruits[-1]}&lt;/code>&lt;/td>
&lt;td>最后一个元素&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${Fruits[*]}&lt;/code>&lt;/td>
&lt;td>所有元素&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${Fruits[@]}&lt;/code>&lt;/td>
&lt;td>所有元素&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${#Fruits[@]}&lt;/code>&lt;/td>
&lt;td>总数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${#Fruits}&lt;/code>&lt;/td>
&lt;td>第一节长度&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${#Fruits[3]}&lt;/code>&lt;/td>
&lt;td>第n个长度&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${Fruits[@]:3:2}&lt;/code>&lt;/td>
&lt;td>范围&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${!Fruits[@]}&lt;/code>&lt;/td>
&lt;td>所有 Key&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="迭代-iteration">迭代 Iteration&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s1">&amp;#39;Apple&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Banana&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Orange&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="k">for&lt;/span> e in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">Fruits&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$e&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="with-index">With index&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> i in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="p">!Fruits[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%s\t%s\n&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">Fruits&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="操作">操作&lt;/h3>
&lt;!--rehype:wrap-class=col-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">Fruits&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Watermelon&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1"># 推&lt;/span>
&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">+=(&lt;/span>&lt;span class="s1">&amp;#39;Watermelon&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1"># 也推&lt;/span>
&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">Fruits&lt;/span>&lt;span class="p">[@]/Ap*/&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">)&lt;/span> &lt;span class="c1"># 通过正则表达式匹配删除&lt;/span>
&lt;span class="nb">unset&lt;/span> Fruits&lt;span class="o">[&lt;/span>2&lt;span class="o">]&lt;/span> &lt;span class="c1"># 删除一项&lt;/span>
&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">Fruits&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1"># 复制&lt;/span>
&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">Fruits&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">Veggies&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1"># 连接&lt;/span>
&lt;span class="nv">lines&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="sb">`&lt;/span>cat &lt;span class="s2">&amp;#34;logfile&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1"># 从文件中读取&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="数组作为参数">数组作为参数&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">function&lt;/span> extract&lt;span class="o">()&lt;/span>
&lt;span class="o">{&lt;/span>
&lt;span class="nb">local&lt;/span> -n &lt;span class="nv">myarray&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="nb">local&lt;/span> &lt;span class="nv">idx&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$2&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">myarray&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$idx&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nv">Fruits&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s1">&amp;#39;Apple&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Banana&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;Orange&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
extract Fruits &lt;span class="m">2&lt;/span> &lt;span class="c1"># =&amp;gt; Orangle&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-字典">Bash 字典&lt;/h2>
&lt;h3 id="定义">定义&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">declare&lt;/span> -A sounds
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">sounds&lt;span class="o">[&lt;/span>dog&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;bark&amp;#34;&lt;/span>
sounds&lt;span class="o">[&lt;/span>cow&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;moo&amp;#34;&lt;/span>
sounds&lt;span class="o">[&lt;/span>bird&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;tweet&amp;#34;&lt;/span>
sounds&lt;span class="o">[&lt;/span>wolf&lt;span class="o">]=&lt;/span>&lt;span class="s2">&amp;#34;howl&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="使用字典">使用字典&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">sounds&lt;/span>&lt;span class="p">[dog]&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># Dog&amp;#39;s sound&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">sounds&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># All values&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="p">!sounds[@]&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># All keys&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${#&lt;/span>&lt;span class="nv">sounds&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># Number of elements&lt;/span>
&lt;span class="nb">unset&lt;/span> sounds&lt;span class="o">[&lt;/span>dog&lt;span class="o">]&lt;/span> &lt;span class="c1"># Delete dog&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="迭代">迭代&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> val in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">sounds&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$val&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> key in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="p">!sounds[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$key&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-条件句">Bash 条件句&lt;/h2>
&lt;h3 id="整数条件">整数条件&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">条件&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ NUM -eq NUM ]]&lt;/code>&lt;/td>
&lt;td>等于 &lt;yel>Eq&lt;/yel>ual&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ NUM -ne NUM ]]&lt;/code>&lt;/td>
&lt;td>不等于 &lt;yel>N&lt;/yel>ot &lt;yel>e&lt;/yel>qual&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ NUM -lt NUM ]]&lt;/code>&lt;/td>
&lt;td>少于 &lt;yel>L&lt;/yel>ess &lt;yel>t&lt;/yel>han&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ NUM -le NUM ]]&lt;/code>&lt;/td>
&lt;td>小于或等于 &lt;yel>L&lt;/yel>ess than or &lt;yel>e&lt;/yel>qual&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ NUM -gt NUM ]]&lt;/code>&lt;/td>
&lt;td>大于 &lt;yel>G&lt;/yel>reater &lt;yel>t&lt;/yel>han&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ NUM -ge NUM ]]&lt;/code>&lt;/td>
&lt;td>大于或等于 &lt;yel>G&lt;/yel>reater than or &lt;yel>e&lt;/yel>qual&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>(( NUM &amp;lt; NUM ))&lt;/code>&lt;/td>
&lt;td>少于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>(( NUM &amp;lt;= NUM ))&lt;/code>&lt;/td>
&lt;td>小于或等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>(( NUM &amp;gt; NUM ))&lt;/code>&lt;/td>
&lt;td>比&amp;hellip;更棒&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>(( NUM &amp;gt;= NUM ))&lt;/code>&lt;/td>
&lt;td>大于或等于&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="字符串条件">字符串条件&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">条件&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -z STR ]]&lt;/code>&lt;/td>
&lt;td>空字符串&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -n STR ]]&lt;/code>&lt;/td>
&lt;td>&lt;yel>非&lt;/yel>空字符串&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ STR == STR ]]&lt;/code>&lt;/td>
&lt;td>平等的&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ STR = STR ]]&lt;/code>&lt;/td>
&lt;td>相等（同上）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ STR &amp;lt; STR ]]&lt;/code>&lt;/td>
&lt;td>小于 &lt;em>(ASCII)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ STR &amp;gt; STR ]]&lt;/code>&lt;/td>
&lt;td>大于 &lt;em>(ASCII)&lt;/em>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ STR != STR ]]&lt;/code>&lt;/td>
&lt;td>不相等&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ STR =~ STR ]]&lt;/code>&lt;/td>
&lt;td>正则表达式&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="例子">例子&lt;/h3>
&lt;!--rehype:wrap-class=row-span-3-->
&lt;h4 id="字符串">字符串&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -z &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$string&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;String is empty&amp;#34;&lt;/span>
&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$string&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;String is not empty&amp;#34;&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;This never happens&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="组合">组合&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> X &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> Y &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
...
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="相等">相等&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$A&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$B&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
...
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="正则表达式">正则表达式&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s1">&amp;#39;1. abc&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span>~ &lt;span class="o">([&lt;/span>a-z&lt;span class="o">]&lt;/span>+&lt;span class="o">)&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">BASH_REMATCH&lt;/span>&lt;span class="p">[1]&lt;/span>&lt;span class="si">}&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="更小">更小&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">((&lt;/span> &lt;span class="nv">$a&lt;/span> &amp;lt; &lt;span class="nv">$b&lt;/span> &lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$a&lt;/span>&lt;span class="s2"> is smaller than &lt;/span>&lt;span class="nv">$b&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="存在">存在&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> -e &lt;span class="s2">&amp;#34;file.txt&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;file exists&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="文件条件">文件条件&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2-->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">条件&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -e FILE ]]&lt;/code>&lt;/td>
&lt;td>存在&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -d FILE ]]&lt;/code>&lt;/td>
&lt;td>目录&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -f FILE ]]&lt;/code>&lt;/td>
&lt;td>文件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -h FILE ]]&lt;/code>&lt;/td>
&lt;td>符号链接&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -s FILE ]]&lt;/code>&lt;/td>
&lt;td>大小 &amp;gt; 0 字节&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -r FILE ]]&lt;/code>&lt;/td>
&lt;td>可读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -w FILE ]]&lt;/code>&lt;/td>
&lt;td>可写&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -x FILE ]]&lt;/code>&lt;/td>
&lt;td>可执行文件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ f1 -nt f2 ]]&lt;/code>&lt;/td>
&lt;td>f1 比 f2 新&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ f1 -ot f2 ]]&lt;/code>&lt;/td>
&lt;td>f2 早于 f1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ f1 -ef f2 ]]&lt;/code>&lt;/td>
&lt;td>相同的文件&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="更多条件">更多条件&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">条件&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ -o noclobber ]]&lt;/code>&lt;/td>
&lt;td>如果启用 OPTION&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ ! EXPR ]]&lt;/code>&lt;/td>
&lt;td>不是 Not&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ X &amp;amp;&amp;amp; Y ]]&lt;/code>&lt;/td>
&lt;td>和 And&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>[[ X || Y ]]&lt;/code>&lt;/td>
&lt;td>或者 Or&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="逻辑和或">逻辑和，或&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span> -a &lt;span class="nv">$2&lt;/span> -gt &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;yes&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;n&amp;#39;&lt;/span> -o &lt;span class="nv">$2&lt;/span> -lt &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;no&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-循环">Bash 循环&lt;/h2>
&lt;h3 id="基本-for-循环">基本 for 循环&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> i in /etc/rc.*&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$i&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="类似-c-的-for-循环">类似 C 的 for 循环&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> &lt;span class="o">((&lt;/span>&lt;span class="nv">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="p">;&lt;/span> i &amp;lt; &lt;span class="m">100&lt;/span> &lt;span class="p">;&lt;/span> i++&lt;span class="o">))&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$i&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="范围">范围&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> i in &lt;span class="o">{&lt;/span>1..5&lt;span class="o">}&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Welcome &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="具有步长">具有步长&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> i in &lt;span class="o">{&lt;/span>5..50..5&lt;span class="o">}&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Welcome &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自动递增">自动递增&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$i&lt;/span> -lt &lt;span class="m">4&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Number: &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">((&lt;/span>i++&lt;span class="o">))&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自动递增-1">自动递增&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span>
&lt;span class="k">while&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$i&lt;/span> -gt &lt;span class="m">0&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Number: &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">((&lt;/span>i--&lt;span class="o">))&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="continue">Continue&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> number in &lt;span class="k">$(&lt;/span>seq &lt;span class="m">1&lt;/span> 3&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$number&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="break">Break&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">for&lt;/span> number in &lt;span class="k">$(&lt;/span>seq &lt;span class="m">1&lt;/span> 3&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$number&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="c1"># Skip entire rest of loop.&lt;/span>
break&lt;span class="p">;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;span class="c1"># This will only print 1&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$number&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="until">Until&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">count&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;span class="k">until&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$count&lt;/span> -gt &lt;span class="m">10&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$count&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">((&lt;/span>count++&lt;span class="o">))&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="永远">永远&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">while&lt;/span> true&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="c1"># here is some code.&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="永远简写">永远（简写）&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">while&lt;/span> :&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="c1"># here is some code.&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="正在读取行">正在读取行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">cat file.txt &lt;span class="p">|&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="nb">read&lt;/span> line&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$line&lt;/span>
&lt;span class="k">done&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-函数">Bash 函数&lt;/h2>
&lt;h3 id="定义函数">定义函数&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">myfunc&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hello &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 同上（替代语法）&lt;/span>
&lt;span class="k">function&lt;/span> myfunc&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hello &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">myfunc &lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="返回值">返回值&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">myfunc&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nb">local&lt;/span> &lt;span class="nv">myresult&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;some value&amp;#39;&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$myresult&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">result&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>myfunc&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="正在引发错误">正在引发错误&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">myfunc&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="k">return&lt;/span> &lt;span class="m">1&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> myfunc&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>
&lt;span class="k">else&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;failure&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-选项">Bash 选项&lt;/h2>
&lt;!--rehype:body-class=cols-2-->
&lt;h3 id="选项">选项&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 避免覆盖文件&lt;/span>
&lt;span class="c1"># (echo &amp;#34;hi&amp;#34; &amp;gt; foo)&lt;/span>
&lt;span class="nb">set&lt;/span> -o noclobber
&lt;span class="c1"># 用于出错时退出&lt;/span>
&lt;span class="c1"># 避免级联错误&lt;/span>
&lt;span class="nb">set&lt;/span> -o errexit
&lt;span class="c1"># 揭示隐藏的失败&lt;/span>
&lt;span class="nb">set&lt;/span> -o pipefail
&lt;span class="c1"># 公开未设置的变量&lt;/span>
&lt;span class="nb">set&lt;/span> -o nounset
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="全局选项">全局选项&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="c1"># 不匹配的 glob 被删除&lt;/span>
&lt;span class="c1"># (&amp;#39;*.foo&amp;#39; =&amp;gt; &amp;#39;&amp;#39;)&lt;/span>
&lt;span class="nb">shopt&lt;/span> -s nullglob
&lt;span class="c1"># 不匹配的 glob 抛出错误&lt;/span>
&lt;span class="nb">shopt&lt;/span> -s failglob
&lt;span class="c1"># 不区分大小写的球体&lt;/span>
&lt;span class="nb">shopt&lt;/span> -s nocaseglob
&lt;span class="c1"># 通配符匹配点文件&lt;/span>
&lt;span class="c1"># (&amp;#34;*.sh&amp;#34; =&amp;gt; &amp;#34;.foo.sh&amp;#34;)&lt;/span>
&lt;span class="nb">shopt&lt;/span> -s dotglob
&lt;span class="c1"># 允许 ** 进行递归匹配&lt;/span>
&lt;span class="c1"># (&amp;#39;lib/**/*.rb&amp;#39; =&amp;gt; &amp;#39;lib/a/b/c.rb&amp;#39;)&lt;/span>
&lt;span class="nb">shopt&lt;/span> -s globstar
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="bash-历史">Bash 历史&lt;/h2>
&lt;!--rehype:body-class=cols-2-->
&lt;h3 id="命令">命令&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>history&lt;/code>&lt;/td>
&lt;td>显示历史&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>sudo !!&lt;/code>&lt;/td>
&lt;td>使用 sudo 运行上一个命令&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>shopt -s histverify&lt;/code>&lt;/td>
&lt;td>不要立即执行扩展结果&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="表达式">表达式&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表达式&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!$&lt;/code>&lt;/td>
&lt;td>展开最新命令的最后一个参数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!*&lt;/code>&lt;/td>
&lt;td>展开最新命令的所有参数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!-n&lt;/code>&lt;/td>
&lt;td>展开第 &lt;code>n&lt;/code> 个最近的命令&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!n&lt;/code>&lt;/td>
&lt;td>展开历史中的第 &lt;code>n&lt;/code> 个命令&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!&amp;lt;command&amp;gt;&lt;/code>&lt;/td>
&lt;td>展开最近调用的命令 &lt;code>&amp;lt;command&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="操作-1">操作&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">代码&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!!&lt;/code>&lt;/td>
&lt;td>再次执行最后一条命令&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!!:s/&amp;lt;FROM&amp;gt;/&amp;lt;TO&amp;gt;/&lt;/code>&lt;/td>
&lt;td>在最近的命令中将第一次出现的 &lt;code>&amp;lt;FROM&amp;gt;&lt;/code> 替换为 &lt;code>&amp;lt;TO&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!!:gs/&amp;lt;FROM&amp;gt;/&amp;lt;TO&amp;gt;/&lt;/code>&lt;/td>
&lt;td>在最近的命令中将所有出现的 &lt;code>&amp;lt;FROM&amp;gt;&lt;/code> 替换为 &lt;code>&amp;lt;TO&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!$:t&lt;/code>&lt;/td>
&lt;td>仅从最近命令的最后一个参数扩展基本名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!$:h&lt;/code>&lt;/td>
&lt;td>仅从最近命令的最后一个参数展开目录&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;code>!!&lt;/code> 和 &lt;code>!$&lt;/code> 可以替换为任何有效的扩展。&lt;/p>
&lt;h3 id="切片-slices">切片 Slices&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">代码&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!!:n&lt;/code>&lt;/td>
&lt;td>仅扩展最近命令中的第 &lt;code>n&lt;/code> 个标记（命令为 &lt;code>0&lt;/code>；第一个参数为 &lt;code>1&lt;/code>）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!^&lt;/code>&lt;/td>
&lt;td>从最近的命令展开第一个参数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!$&lt;/code>&lt;/td>
&lt;td>从最近的命令中展开最后一个标记&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!!:n-m&lt;/code>&lt;/td>
&lt;td>从最近的命令扩展令牌范围&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>!!:n-$&lt;/code>&lt;/td>
&lt;td>从最近的命令中将第 &lt;code>n&lt;/code> 个标记展开到最后&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;code>!!&lt;/code> 可以替换为任何有效的扩展，即 &lt;code>!cat&lt;/code>、&lt;code>!-2&lt;/code>、&lt;code>!42&lt;/code> 等。&lt;/p>
&lt;h2 id="各种各样的">各种各样的&lt;/h2>
&lt;h3 id="数值计算">数值计算&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">$((&lt;/span>a &lt;span class="o">+&lt;/span> &lt;span class="m">200&lt;/span>&lt;span class="k">))&lt;/span> &lt;span class="c1"># Add 200 to $a&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">$((&lt;/span>&lt;span class="nv">$RANDOM&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="m">200&lt;/span>&lt;span class="k">))&lt;/span> &lt;span class="c1"># Random number 0..199&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="子-shell">子 shell&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="o">(&lt;/span>&lt;span class="nb">cd&lt;/span> somedir&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;I&amp;#39;m now in &lt;/span>&lt;span class="nv">$PWD&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nb">pwd&lt;/span> &lt;span class="c1"># still in first directory&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="检查命令">检查命令&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">command&lt;/span> -V &lt;span class="nb">cd&lt;/span>
&lt;span class="c1">#=&amp;gt; &amp;#34;cd is a function/alias/whatever&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="重定向">重定向&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2 col-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">python hello.py &amp;gt; output.txt &lt;span class="c1"># 标准输出到（文件）&lt;/span>
python hello.py &amp;gt;&amp;gt; output.txt &lt;span class="c1"># 标准输出到（文件），追加&lt;/span>
python hello.py 2&amp;gt; error.log &lt;span class="c1"># 标准错误到（文件）&lt;/span>
python hello.py 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="c1"># 标准错误到标准输出&lt;/span>
python hello.py 2&amp;gt;/dev/null &lt;span class="c1"># 标准错误到（空null）&lt;/span>
python hello.py &lt;span class="p">&amp;amp;&lt;/span>&amp;gt;/dev/null &lt;span class="c1"># 标准输出和标准错误到（空null）&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">python hello.py &amp;lt; foo.txt &lt;span class="c1"># 将 foo.txt 提供给 python 的标准输入&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="来源相对">来源相对&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">source&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="p">%/*&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/../share/foo.sh&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="脚本目录">脚本目录&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="p">%/*&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="caseswitch">Case/switch&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> in
start &lt;span class="p">|&lt;/span> up&lt;span class="o">)&lt;/span>
vagrant up
&lt;span class="p">;;&lt;/span>
*&lt;span class="o">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Usage: &lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2"> {start|stop|ssh}&amp;#34;&lt;/span>
&lt;span class="p">;;&lt;/span>
&lt;span class="k">esac&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="陷阱错误">陷阱错误&lt;/h3>
&lt;!--rehype:wrap-class=col-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">trap&lt;/span> &lt;span class="s1">&amp;#39;echo Error at about $LINENO&amp;#39;&lt;/span> ERR
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>或者&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">traperr&lt;span class="o">()&lt;/span> &lt;span class="o">{&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;ERROR: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASH_SOURCE&lt;/span>&lt;span class="p">[1]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> at about &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">BASH_LINENO&lt;/span>&lt;span class="p">[0]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;span class="nb">set&lt;/span> -o errtrace
&lt;span class="nb">trap&lt;/span> traperr ERR
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="printf">printf&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;Hello %s, I&amp;#39;m %s&amp;#34;&lt;/span> Sven Olga
&lt;span class="c1">#=&amp;gt; &amp;#34;Hello Sven, I&amp;#39;m Olga&lt;/span>
&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;1 + 1 = %d&amp;#34;&lt;/span> &lt;span class="m">2&lt;/span>
&lt;span class="c1">#=&amp;gt; &amp;#34;1 + 1 = 2&amp;#34;&lt;/span>
&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;Print a float: %f&amp;#34;&lt;/span> &lt;span class="m">2&lt;/span>
&lt;span class="c1">#=&amp;gt; &amp;#34;Print a float: 2.000000&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="获取选项">获取选项&lt;/h3>
&lt;!--rehype:wrap-class=col-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">while&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span>~ ^- &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> ! &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;--&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="k">case&lt;/span> &lt;span class="nv">$1&lt;/span> in
-V &lt;span class="p">|&lt;/span> --version &lt;span class="o">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$version&lt;/span>
&lt;span class="nb">exit&lt;/span>
&lt;span class="p">;;&lt;/span>
-s &lt;span class="p">|&lt;/span> --string &lt;span class="o">)&lt;/span>
shift&lt;span class="p">;&lt;/span> &lt;span class="nv">string&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;span class="p">;;&lt;/span>
-f &lt;span class="p">|&lt;/span> --flag &lt;span class="o">)&lt;/span>
&lt;span class="nv">flag&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;span class="p">;;&lt;/span>
&lt;span class="k">esac&lt;/span>&lt;span class="p">;&lt;/span> shift&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;--&amp;#39;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> shift&lt;span class="p">;&lt;/span> &lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="检查命令的结果">检查命令的结果&lt;/h3>
&lt;!--rehype:wrap-class=col-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> ping -c &lt;span class="m">1&lt;/span> google.com&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;看来您的互联网连接正常&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="特殊变量">特殊变量&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2-->
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">表达式&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$?&lt;/code>&lt;/td>
&lt;td>最后一个任务的退出状态&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$!&lt;/code>&lt;/td>
&lt;td>最后一个后台任务的 PID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$$&lt;/code>&lt;/td>
&lt;td>shell PID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$0&lt;/code>&lt;/td>
&lt;td>shell 脚本的文件名&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>见&lt;a href="http://wiki.bash-hackers.org/syntax/shellvars#special_parameters_and_shell_variables">特殊参数&lt;/a>。&lt;/p>
&lt;h3 id="grep-检查">grep 检查&lt;/h3>
&lt;!--rehype:wrap-class=col-span-2-->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="k">if&lt;/span> grep -q &lt;span class="s1">&amp;#39;foo&amp;#39;&lt;/span> ~/.bash_history&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;您过去似乎输入过“foo”&amp;#34;&lt;/span>
&lt;span class="k">fi&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="反斜杠转义">反斜杠转义&lt;/h3>
&lt;!--rehype:wrap-class=row-span-2-->
&lt;ul>
&lt;li> &lt;/li>
&lt;li>!&lt;/li>
&lt;li>&amp;quot;&lt;/li>
&lt;li>#&lt;/li>
&lt;li>&amp;amp;&lt;/li>
&lt;li>'&lt;/li>
&lt;li>(&lt;/li>
&lt;li>)&lt;/li>
&lt;li>,&lt;/li>
&lt;li>;&lt;/li>
&lt;li>&amp;lt;&lt;/li>
&lt;li>&amp;gt;&lt;/li>
&lt;li>[&lt;/li>
&lt;li>|&lt;/li>
&lt;li>\&lt;/li>
&lt;li>]&lt;/li>
&lt;li>^&lt;/li>
&lt;li>{&lt;/li>
&lt;li>}&lt;/li>
&lt;li>`&lt;/li>
&lt;li>$&lt;/li>
&lt;li>*&lt;/li>
&lt;li>?&lt;/li>
&lt;/ul>
&lt;!--rehype:className=cols-4 style-none-->
&lt;p>使用 &lt;code>\&lt;/code> 转义这些特殊字符&lt;/p>
&lt;h3 id="heredoc">Heredoc&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">cat &lt;span class="s">&amp;lt;&amp;lt;END
&lt;/span>&lt;span class="s">hello world
&lt;/span>&lt;span class="s">END&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="转到上一个目录">转到上一个目录&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">pwd&lt;/span> &lt;span class="c1"># /home/user/foo&lt;/span>
&lt;span class="nb">cd&lt;/span> bar/
&lt;span class="nb">pwd&lt;/span> &lt;span class="c1"># /home/user/foo/bar&lt;/span>
&lt;span class="nb">cd&lt;/span> -
&lt;span class="nb">pwd&lt;/span> &lt;span class="c1"># /home/user/foo&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="读取输入">读取输入&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;Proceed? [y/n]: &amp;#34;&lt;/span>
&lt;span class="nb">read&lt;/span> ans
&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$ans&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">read&lt;/span> -n &lt;span class="m">1&lt;/span> ans &lt;span class="c1"># 只有一个字符&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="条件执行">条件执行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git commit &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> git push
git commit &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Commit failed&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="严格模式">严格模式&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">set&lt;/span> -euo pipefail
&lt;span class="nv">IFS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">$&amp;#39;\n\t&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参见：&lt;a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">非官方 bash 严格模式&lt;/a>&lt;/p>
&lt;h3 id="可选参数">可选参数&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nv">args&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$@&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;span class="nv">args&lt;/span>&lt;span class="o">+=(&lt;/span>foo&lt;span class="o">)&lt;/span>
&lt;span class="nv">args&lt;/span>&lt;span class="o">+=(&lt;/span>bar&lt;span class="o">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">args&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将参数放入数组中，然后追加&lt;/p>
&lt;h2 id="另见">另见&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://jaywcjlove.github.io/shell-tutorial">Shell 教程&lt;/a> &lt;em>(jaywcjlove.github.io)&lt;/em>&lt;/li>
&lt;li>&lt;a href="https://devhints.io/bash">Devhints&lt;/a> &lt;em>(devhints.io)&lt;/em>&lt;/li>
&lt;li>&lt;a href="http://wiki.bash-hackers.org/">Bash-hackers wiki&lt;/a> &lt;em>(bash-hackers.org)&lt;/em>&lt;/li>
&lt;li>&lt;a href="http://wiki.bash-hackers.org/syntax/shellvars">Shell vars&lt;/a> &lt;em>(bash-hackers.org)&lt;/em>&lt;/li>
&lt;li>&lt;a href="https://learnxinyminutes.com/docs/bash/">Learn bash in y minutes&lt;/a> &lt;em>(learnxinyminutes.com)&lt;/em>&lt;/li>
&lt;li>&lt;a href="http://mywiki.wooledge.org/BashGuide">Bash Guide&lt;/a> &lt;em>(mywiki.wooledge.org)&lt;/em>&lt;/li>
&lt;li>&lt;a href="https://www.shellcheck.net/">ShellCheck&lt;/a> &lt;em>(shellcheck.net)&lt;/em>&lt;/li>
&lt;li>&lt;a href="https://devmanual.gentoo.org/tools-reference/bash/index.html">shell - Standard Shell&lt;/a> &lt;em>(devmanual.gentoo.org)&lt;/em>&lt;/li>
&lt;/ul></description></item><item><title>Sublime</title><link>https://jiyongcheng.dev/post/sublime/</link><pubDate>Fri, 07 Oct 2022 08:45:02 +1100</pubDate><guid>https://jiyongcheng.dev/post/sublime/</guid><description>&lt;h1 id="column-selection">Column selection&lt;/h1>
&lt;p>Column selection can be used to select a rectangular area of a file.&lt;/p>
&lt;h2 id="mac">Mac&lt;/h2>
&lt;h3 id="using-mouse">Using mouse&lt;/h3>
&lt;pre>&lt;code>Left Mouse Button + ⌥
OR: Middle Mouse Button
Add to selection: ⌘
Subtract from selection: ⇧+⌘
&lt;/code>&lt;/pre>
&lt;h3 id="using-keyboard">Using keyboard&lt;/h3>
&lt;pre>&lt;code>Ctrl+Shift+⬆
Ctrl+Shift+⬇
&lt;/code>&lt;/pre></description></item><item><title>Docker Mysql</title><link>https://jiyongcheng.dev/post/devops/docker/mysql/</link><pubDate>Fri, 17 Dec 2021 16:18:49 +1100</pubDate><guid>https://jiyongcheng.dev/post/devops/docker/mysql/</guid><description>&lt;p>docker-compose for mysql&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback"> mysql:
image: mysql
command: --default-authentication-plugin=mysql_native_password
restart: always
volumes:
- ./.data/db:/var/lib/mysql
ports:
- 33069:3306
environment:
MYSQL_ROOT_PASSWORD: root
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>If you have a mysql client want to connect to the mysql container, you need assign a port for it. like this &lt;code>33069&lt;/code>.&lt;/p>
&lt;p>then use the following parameters to connect the server.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">Host:127.0.0.1
username:root
password:root
port:33069
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="--initialize-specified-but-the-data-directory-has-files-in-it-aborting">&amp;ndash;initialize specified but the data directory has files in it. Aborting.&lt;/h2>
&lt;p>When I run the docker mysql on my local, I got this issue.&lt;/p>
&lt;p>How to solve it:&lt;/p>
&lt;ul>
&lt;li>First I changed the volumes name, but it didn&amp;rsquo;t solve it.&lt;/li>
&lt;li>Then I run this command &lt;code>docker system prune --volumes&lt;/code>
and run the &lt;code>docker compose up -d&lt;/code> again, it works.&lt;/li>
&lt;/ul></description></item><item><title>Nginx knowledge</title><link>https://jiyongcheng.dev/post/devops/nginx/</link><pubDate>Fri, 17 Dec 2021 14:21:19 +1100</pubDate><guid>https://jiyongcheng.dev/post/devops/nginx/</guid><description>&lt;p>Some knowledge or questions related to NGINX&lt;/p>
&lt;h2 id="understanding-nginx-server-and-location-block-selection-algorithms">Understanding Nginx Server and Location Block Selection Algorithms&lt;/h2>
&lt;p>&lt;a href="https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms">checkout this article&lt;/a>&lt;/p>
&lt;ul>
&lt;li>prefix string/ prefix location
this means the location block has the &lt;code>/blabla&lt;/code> not the regex&lt;/li>
&lt;/ul>
&lt;h2 id="understand-the-nginx-config-for-php">Understand the nginx config for PHP&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">location ~ \.php$ {
fastcgi_pass php:9000;
fastcgi_param SCRIPT_FILENAME
}
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>The &lt;code>fastcig_param&lt;/code> directive sets the &lt;code>SCRIPT_FILENAME = $document_root$fastcgi_script_name&lt;/code>;&lt;/li>
&lt;li>The &lt;code>fastcgi_param&lt;/code> directive sets the FastCGI parameter &lt;code>SCRIPT_FILENAME&lt;/code> to &lt;code>/srv/sinojobs/public/index.php&lt;/code>,and &lt;strong>the FastCGI server&lt;/strong> executes the file.&lt;/li>
&lt;li>The variable &lt;code>$document_root&lt;/code> is equal to the value of the root directive and the variable &lt;code>$fastcgi_script_name&lt;/code> is equal to the request URI, i.e. &lt;code>/index.php&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2 id="nginx-parse-the-uri-info-then-pass-to-php">Nginx parse the uri info then pass to php&lt;/h2>
&lt;p>Nginx can parse the uri info then pass it to php, we can get the info from php variable &lt;code>$_SERVER[&amp;quot;PATH_INFO&amp;quot;]&lt;/code>&lt;/p></description></item><item><title>Commands</title><link>https://jiyongcheng.dev/post/devops/command/</link><pubDate>Mon, 13 Dec 2021 16:51:26 +1100</pubDate><guid>https://jiyongcheng.dev/post/devops/command/</guid><description>&lt;p>The commands that being used.&lt;/p>
&lt;h2 id="tail-command-to-choose-specific-number-of-lines-instead-of-the-default-10">tail command to choose specific number of lines instead of the default 10.&lt;/h2>
&lt;p>&lt;code>tail -n &amp;lt;number_of_lines&amp;gt; /path/to/file&lt;/code>&lt;/p>
&lt;h2 id="head-command">head command&lt;/h2>
&lt;ul>
&lt;li>print first 10 lines.
&lt;ul>
&lt;li>&lt;code>head /etc/passwd&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>print first two lines of a file.
&lt;ul>
&lt;li>&lt;code>head -n 2 /etc/passwd&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>print all lines starting from a line number you specify
&lt;ul>
&lt;li>&lt;code>head -n -27 /etc/passwd&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>PHP</title><link>https://jiyongcheng.dev/post/programming-language/php/php/</link><pubDate>Mon, 13 Dec 2021 15:36:52 +1100</pubDate><guid>https://jiyongcheng.dev/post/programming-language/php/php/</guid><description>&lt;p>Some PHP general ideas or issues.&lt;/p>
&lt;h2 id="error_reporting-level-in-different-environment">error_reporting level in different environment&lt;/h2>
&lt;p>Usually PHP &lt;code>notice&lt;/code> error will be turned off in production while leave it in development environment.
If the &lt;code>notice&lt;/code> is turned on in the dev environment, even though it&amp;rsquo;s a notice for php, it will still show to developer, so the developer can fix it.
in production, if it&amp;rsquo;s truned off, the logic might get passed through the &lt;code>notice&lt;/code> and go to further, then will probably show different error with local dev environment.&lt;/p>
&lt;p>So sometimes, turn off the &lt;code>notice&lt;/code> error_reporting level is a good way to understand the production issue.&lt;/p>
&lt;h2 id="composerlock-file">composer.lock file&lt;/h2>
&lt;p>Committing the composer.lock file into version control is generally good practice for projects.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>It allows continuation testing tools (such as Travis CI) to run the tests against the exact same versions of libraries that you&amp;rsquo;re developing against.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>It also allows all people who are working on the project to use the exact same version of libraries&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>General</title><link>https://jiyongcheng.dev/post/programming-language/general/</link><pubDate>Wed, 08 Dec 2021 17:30:02 +1100</pubDate><guid>https://jiyongcheng.dev/post/programming-language/general/</guid><description>&lt;p>For the general programming knowledge.&lt;/p>
&lt;h2 id="off-by-one-溢出">Off-By-One [溢出]&lt;/h2>
&lt;ul>
&lt;li>严格来说，off-by-one是一种特殊的溢出漏洞，off-by-one指程序向缓冲区中写入时，写入的字节数超过了这个缓冲区本身所申请的字节数并且只越界了一个字节。&lt;/li>
&lt;li>off-by-one，是指单字节缓冲区溢出，这种漏洞的产生往往与边界验证不严和字符串操作有关，也不排除写入的size正好就只多了一个字节的情况。&lt;/li>
&lt;li>一般认为，单字节溢出是难以利用的，但是因为Linux的堆管理机制ptmalloc验证的松散性，基于Linux堆的off-by-one漏洞利用起来并不复杂，并且威力强大。&lt;/li>
&lt;li>off-by-one是可以基于各种缓冲区的，比如栈、bss段等等，但是堆上（heap based）的off-by-one是CTF中比较常见的。&lt;/li>
&lt;/ul></description></item><item><title>Postgresql Questions</title><link>https://jiyongcheng.dev/post/db/postgresql/questions/</link><pubDate>Wed, 08 Dec 2021 12:11:03 +1100</pubDate><guid>https://jiyongcheng.dev/post/db/postgresql/questions/</guid><description>&lt;p>I try to list out the questions during working on Postgresql here for the future reference.&lt;/p>
&lt;h2 id="how-to-convert-date-string-to-timestamp-in-postgresql">How to convert date string to timestamp in postgresql?&lt;/h2>
&lt;p>Use function &lt;a href="https://www.postgresqltutorial.com/postgresql-to_timestamp/">TO_TIMESTAMP&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TO_TIMESTAMP&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;2017-03-31 9:30:20&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;YYYY-MM-DD HH:MI:SS&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c1">-- it will return as following:
&lt;/span>&lt;span class="c1">&lt;/span>&lt;span class="mi">2017&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">03&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">000000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="how-to-return-a-string-value-from-jsonb-in-postgresql">How to return a string value from jsonb in Postgresql?&lt;/h2>
&lt;p>Use &lt;code>jsonb-&amp;gt;&amp;gt;key&lt;/code> operator, be carefuly if you use &lt;code>jsonb-&amp;gt;key&lt;/code> it will return back &lt;code>jsonb&lt;/code> type, not a string.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;{
&lt;/span>&lt;span class="s1"> &amp;#34;first_name&amp;#34;: &amp;#34;Adam&amp;#34;,
&lt;/span>&lt;span class="s1"> &amp;#34;last_name&amp;#34;: &amp;#34;Smith&amp;#34;,
&lt;/span>&lt;span class="s1"> &amp;#34;created_at&amp;#34;: &amp;#34;2021-12-07 03:08:57&amp;#34;,
&lt;/span>&lt;span class="s1"> &amp;#34;updated_at&amp;#34;: &amp;#34;2021-12-07 03:09:00&amp;#34;
&lt;/span>&lt;span class="s1">}&amp;#39;&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">jsonb&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;first_name&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="c1">-- it will return `Adam`
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="can-i-extract-the-info-from-jsonb-in-postgresql">Can I extract the info from jsonb in postgresql?&lt;/h2>
&lt;p>&lt;code>jsonb_extract_path ( from_json jsonb, VARIADIC path_elems text[] ) → jsonb&lt;/code>&lt;/p>
&lt;p>Extracts JSON sub-object at the specified path. (This is functionally equivalent to the #&amp;gt; operator, but writing the path out as a variadic list can be more convenient in some cases.)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="n">json_extract_path&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;{&amp;#34;f2&amp;#34;:{&amp;#34;f3&amp;#34;:1},&amp;#34;f4&amp;#34;:{&amp;#34;f5&amp;#34;:99,&amp;#34;f6&amp;#34;:&amp;#34;foo&amp;#34;}}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;f4&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;f6&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">→&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;foo&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="how-to-put-log-in-stored-procedures">How to put log in stored procedures?&lt;/h2>
&lt;p>You need to change the config file &lt;code>postgresql.conf&lt;/code> and set &lt;code>log_min_messages = notice&lt;/code>, there are some options you can choose, check the config file.&lt;/p>
&lt;h2 id="is-not-null-work-with-composite-type-data">IS NOT NULL work with composite type data&lt;/h2>
&lt;p>If you have a value something that is a composite type, for example a row of a table, something &lt;code>IS NOT NULL&lt;/code> is only true if none of the attributes of the composite are NULL.
&lt;a href="https://www.postgresonline.com/journal/archives/373-Composite-data-types-why-IS-NOT-NULL-is-not-the-same-as-NOT-IS-NULL.html">check more details here&lt;/a>&lt;/p>
&lt;h2 id="how-to-save-24hours-time-format">How to save 24hours time format&lt;/h2>
&lt;p>if you see some error like this &lt;code>Postgresql ERROR: hour &amp;quot;16&amp;quot; is invalid for the 12-hour clock&lt;/code>
you could do this &lt;code>TO_TIMESTAMP(i_test_date -&amp;gt;&amp;gt; 'created_at', 'YYYY-MM-DD HH24:MI:SS')&lt;/code> to save the time as 24hours format&lt;/p></description></item><item><title>Git Commands</title><link>https://jiyongcheng.dev/post/devops/git/commands/</link><pubDate>Thu, 28 Oct 2021 15:40:40 +1100</pubDate><guid>https://jiyongcheng.dev/post/devops/git/commands/</guid><description>&lt;h2 id="git-commands">Git commands&lt;/h2>
&lt;p>list some commands often being used:&lt;/p>
&lt;h2 id="delete-branch">Delete branch&lt;/h2>
&lt;ul>
&lt;li>Deleting local branches&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git branch -d feature/add-new-feature
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Deleting remote branches in Git&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> git push origin --delete feature/add-new-feature
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="change-branch-name">Change branch name&lt;/h2>
&lt;ul>
&lt;li>change name of local branch&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git checkout &amp;lt;branch&amp;gt;
git branch -m &amp;lt;new_branch_name&amp;gt;
&lt;span class="c1">##example&lt;/span>
git checkout feature
git branch -m quickfix
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>change name of remote branch
&lt;ul>
&lt;li>you have to change branch name locally first&lt;/li>
&lt;li>then do the following:&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">git push &amp;lt;remote&amp;gt; :&amp;lt;old_branch_name&amp;gt; &amp;lt;new_branch_name&amp;gt;
&lt;span class="c1">#you have to set the upstream branch for the newly created branch using the “git upstream” command.&lt;/span>
git push &amp;lt;remote&amp;gt; -u &amp;lt;new_branch_name&amp;gt;
git push origin :feature quickfix
git push origin -u quickfix
&lt;span class="c1">## example&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Convert Sqlite to Mysql</title><link>https://jiyongcheng.dev/post/db/convert-sqlite-to-mysql/</link><pubDate>Thu, 28 Oct 2021 13:22:45 +1100</pubDate><guid>https://jiyongcheng.dev/post/db/convert-sqlite-to-mysql/</guid><description>&lt;h2 id="is-it-possible-to-convert-sqlite-to-mysql-as-is">Is it possible to convert SQLite to MySQL &amp;ldquo;as is&amp;rdquo;?&lt;/h2>
&lt;p>Probably the quick and easiest way to convert SQLite to MySQL includes two general steps:&lt;/p>
&lt;ul>
&lt;li>Export SQLite database to dump file using SQLite .dump command.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">sqlite3 sample.db .dump &amp;gt; dump.sql
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>You can then (in theory) import SQLite dump into the MySQL database.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">mysql -p -u root -h 127.0.0.1 &lt;span class="nb">test&lt;/span> &amp;lt; dump.sql
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;In theory&amp;rdquo; means that solution wouldn&amp;rsquo;t work as there are a few differences in grammars between MySQL and SQLite.&lt;/p>
&lt;p>There are just some differences between SQLite and MySQL syntax&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>SQLite&lt;/th>
&lt;th>MySQL&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>AUTOINCREMENT&lt;/td>
&lt;td>AUTO_INCREMENT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TEXT&lt;/td>
&lt;td>varchars&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>double quotes (&amp;quot; &amp;ldquo;)&lt;/td>
&lt;td>backticks (` `)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>BEGIN TRANSACTION; COMMIT;&lt;/code>&lt;/td>
&lt;td>&lt;code> BEGIN; COMMIT&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>CLOB&lt;/td>
&lt;td>TINYTEXT, TEXT, MEDIUMTEXT, LONGTEXT&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PRAGMA foreign_keys=OFF;&lt;/td>
&lt;td>SET FOREIGN_KEY_CHECKS=0;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Upstream and Downstream</title><link>https://jiyongcheng.dev/post/system-design/upstream-downstream/</link><pubDate>Thu, 28 Oct 2021 09:31:07 +1100</pubDate><guid>https://jiyongcheng.dev/post/system-design/upstream-downstream/</guid><description>&lt;p>In the &lt;code>LNMP&lt;/code> development process, we often configure the nginx, and we will set similar like this&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">upstream php-fpm &lt;span class="o">{&lt;/span>
server php-fpm:9000&lt;span class="p">;&lt;/span>
&lt;span class="o">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>and I want to know what does &lt;code>upstream&lt;/code> here mean.&lt;/p>
&lt;p>&lt;img src="stream.drawio.svg" alt="Up stream and Down stream">&lt;/p>
&lt;p>So basically it&amp;rsquo;s about dependency, the &lt;code>Nginx&lt;/code> server depend on &lt;code>PHP&lt;/code> server to return back data. So &lt;code>PHP&lt;/code> server is upstream of &lt;code>Nginx&lt;/code>.&lt;/p>
&lt;p>The &lt;code>Browser&lt;/code> is depending on the &lt;code>Nginx&lt;/code> server to return back data, so &lt;code>Nginx&lt;/code> server is &lt;code>upstream&lt;/code> of &lt;code>Browser&lt;/code>.&lt;/p>
&lt;p>On the other hand, &lt;code>Browser&lt;/code> is &lt;code>downstream&lt;/code> of &lt;code>Nginx&lt;/code> server, because the data from &lt;code>Nginx&lt;/code> will flow into the &lt;code>Browser&lt;/code>, same as &lt;code>PHP&lt;/code>, &lt;code>DB&lt;/code>.&lt;/p>
&lt;blockquote>
&lt;p>A production process is very similar to a river, so it’s easy to grasp that as the process goes from one step to the next, we’re moving downstream.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>We can deduct the following rules:&lt;/p>
&lt;ul>
&lt;li>Dependency Rule: each item depends on all the items upstream from its viewpoint&lt;/li>
&lt;li>Value Rule: moving downstream, each step adds more value to the product&lt;/li>
&lt;/ul>
&lt;/blockquote></description></item><item><title>Docker commands</title><link>https://jiyongcheng.dev/post/devops/docker/docker-commands/</link><pubDate>Mon, 11 Oct 2021 14:31:07 +1000</pubDate><guid>https://jiyongcheng.dev/post/devops/docker/docker-commands/</guid><description>&lt;h2 id="does-docker-build---no-cache-actually-download-and-refresh-the-base-image">Does Docker build &amp;ndash;no-cache actually download and refresh the base image&lt;/h2>
&lt;p>The &amp;ndash;no-cache option will rebuild the image without using the local cached layers.&lt;/p>
&lt;p>However, the FROM line will reuse the already pulled base image if it exists on the build host (the from line itself may not be cached, but the image it pulls is).&lt;/p>
&lt;p>If you want to pull the base image again, you can use the &amp;ndash;pull option to the build command. E.g.&lt;/p>
&lt;p>&lt;code>docker build --no-cache --pull -t new-image-name:latest .&lt;/code>&lt;/p>
&lt;p>&lt;a href="https://stackoverflow.com/questions/52664744/does-docker-build-no-cache-actually-download-and-refresh-the-base-image#52666415">check more from here&lt;/a>&lt;/p></description></item><item><title>Data structures and algorithm</title><link>https://jiyongcheng.dev/resource/datastructure/</link><pubDate>Thu, 07 Oct 2021 09:29:55 +1000</pubDate><guid>https://jiyongcheng.dev/resource/datastructure/</guid><description>&lt;h2 id="algorithm">Algorithm&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/williamfiset/Algorithms">https://github.com/williamfiset/Algorithms&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="practice">Practice&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/karan/Projects">https://github.com/karan/Projects&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>DBs</title><link>https://jiyongcheng.dev/resource/db/</link><pubDate>Thu, 07 Oct 2021 09:29:55 +1000</pubDate><guid>https://jiyongcheng.dev/resource/db/</guid><description>&lt;h2 id="postgresql">PostgreSQL&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/faisalbasra/postgres_books">https://github.com/faisalbasra/postgres_books&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="mysql">Mysql&lt;/h2>
&lt;ul>
&lt;li>deadlocks &lt;a href="https://github.com/aneasystone/mysql-deadlocks">https://github.com/aneasystone/mysql-deadlocks&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Books</title><link>https://jiyongcheng.dev/resource/book/</link><pubDate>Wed, 06 Oct 2021 09:29:55 +1000</pubDate><guid>https://jiyongcheng.dev/resource/book/</guid><description>&lt;ul>
&lt;li>&lt;a href="https://github.com/stormtrooper96/books">https://github.com/stormtrooper96/books&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/AB1908/CS-Books">https://github.com/AB1908/CS-Books&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Check Port Being Used</title><link>https://jiyongcheng.dev/post/devops/linux/check-port-being-used/</link><pubDate>Wed, 29 Sep 2021 12:45:41 +1000</pubDate><guid>https://jiyongcheng.dev/post/devops/linux/check-port-being-used/</guid><description>&lt;p>&lt;code>lsof&lt;/code> list open files&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">lsof -i -P -n &lt;span class="p">|&lt;/span> grep LISTEN
- -i selects the listing of all Internet and x.25 &lt;span class="o">(&lt;/span>HP-UX&lt;span class="o">)&lt;/span> network files
- -P inhibit the conversion of port numbers to port names
- -n inhibit the conversion of network numbers to host names
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>-P and -n will make the lookup faster&lt;/code>&lt;/p>
&lt;h2 id="example">Example&lt;/h2>
&lt;h3 id="list-only-files-that-listen-to-port-80">List only files that listen to port 80&lt;/h3>
&lt;p>&lt;code>lsof -i:80 -P -n | grep LISTEN&lt;/code>&lt;/p></description></item><item><title>Understanding Git</title><link>https://jiyongcheng.dev/post/devops/git/understanding-git/</link><pubDate>Tue, 28 Sep 2021 15:35:23 +1000</pubDate><guid>https://jiyongcheng.dev/post/devops/git/understanding-git/</guid><description>&lt;h2 id="what-does-10064-mean-in-git">What does 10064 mean in Git?&lt;/h2>
&lt;p>When you do &lt;code>git commit&lt;/code> command, you probably have seen this information&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback"> delete mode 100644 layouts/resource/index.html
create mode 100644 layouts/resource/section.html
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>but what does this series of number mean?&lt;/p>
&lt;p>The values shown are the 16-bit file modes as stored by Git, you can &lt;a href="https://github.com/git/git/blob/master/Documentation/technical/index-format.txt">check here&lt;/a> to know more:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback"> 32-bit mode, split into (high to low bits)
4-bit object type
valid values in binary are 1000 (regular file), 1010 (symbolic link) and 1110 (gitlink)
3-bit unused
9-bit unix permission. Only 0755 and 0644 are valid for regular files.
Symbolic links and gitlinks have value 0 in this field.
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>If the file doesn’t mention directories; they are represented using object type 0100.&lt;/p>
&lt;p>Each digit in the six-digit value is in octal, representing three bits; 16 bits thus need six digits, the first of which only represents one bit:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">Type|---|Perm bits
1000 000 111101101
1 0 0 7 5 5
1000 000 110100100
1 0 0 6 4 4
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Git doesn’t store arbitrary modes, only a subset of the values are allowed, from the usual POSIX types and modes (in octal, 12 for a symbolic link, 10 for a regular file, 04 for a directory) to which git adds 16 for Git links. The mode is appended, using four octal digits.&lt;/p>
&lt;p>For files,&lt;/p>
&lt;p>you’ll only ever see 100755 or 100644 (although 100664 is also technically possible);&lt;/p>
&lt;p>directories are 040000 (permissions are ignored),&lt;/p>
&lt;p>symbolic links 120000.&lt;/p>
&lt;p>The set-user-ID, set-group-ID and sticky bits aren’t supported at all (they would be stored in the unused bits).&lt;/p></description></item><item><title>Create Array With Object From List using jq</title><link>https://jiyongcheng.dev/post/devops/jq/create-array-with-object-from-list/</link><pubDate>Wed, 22 Sep 2021 14:31:07 +1000</pubDate><guid>https://jiyongcheng.dev/post/devops/jq/create-array-with-object-from-list/</guid><description>&lt;h2 id="problem">Problem&lt;/h2>
&lt;p>We have a list of &lt;code>IDs&lt;/code> generated into a file &lt;code>F&lt;/code> with this format:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">2f9921bc-a4c9-419a-b069-f8f23c7727f7
26bf5cc3-73de-425e-9a6b-b70223387314
30ac5b4c-f4c6-42c6-901d-e8bdf16464b8
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>We want to generate a &lt;code>JSON&lt;/code> object from the &lt;code>IDs&lt;/code> with this structure:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;users&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2f9921bc-a4c9-419a-b069-f8f23c7727f7&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">],&lt;/span>
&lt;span class="nt">&amp;#34;organisation_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;user-type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="the-way-we-do-it">The way we do it&lt;/h2>
&lt;h3 id="we-use-jq">we use &lt;code>jq&lt;/code>&lt;/h3>
&lt;ul>
&lt;li>what is &lt;code>jq&lt;/code>
&lt;ul>
&lt;li>&lt;code>jq&lt;/code> is a lightweight and flexible command-line JSON processor. 轻量级的命令行JSON处理器，非常灵活&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>what are the main features
&lt;ul>
&lt;li>&lt;code>jq&lt;/code> is like &lt;code>sed&lt;/code> for &lt;code>JSON&lt;/code> data
&lt;ul>
&lt;li>你可以方便的使用它对结构化的数据进行&lt;code>slice&lt;/code> and &lt;code>filter&lt;/code> and &lt;code>map&lt;/code> and &lt;code>transform&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>jq&lt;/code> is written in portable C, and it has zero runtime dependencies.
&lt;ul>
&lt;li>它没有运行时的依赖&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="https://stedolan.github.io/jq/tutorial/">Tutorial&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://stedolan.github.io/jq/manual/">Manual&lt;/a> or you can run &lt;code>man jq&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="how-do-we-do-it">How do we do it&lt;/h2>
&lt;p>the following is the code&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash"> &lt;span class="nv">USER_IDS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>jq -Rn &lt;span class="s1">&amp;#39;
&lt;/span>&lt;span class="s1"> def assemble_user($user_id): {
&lt;/span>&lt;span class="s1"> &amp;#34;user_id&amp;#34;: $user_id
&lt;/span>&lt;span class="s1"> };
&lt;/span>&lt;span class="s1"> [
&lt;/span>&lt;span class="s1"> inputs
&lt;/span>&lt;span class="s1"> | select(length&amp;gt;0)
&lt;/span>&lt;span class="s1"> | assemble_user(.)
&lt;/span>&lt;span class="s1"> ]&amp;#39;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&amp;lt;&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$USER_IDS&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;span class="nv">USER_JSON&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span> jq -n &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> --argjson user_ids &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$USER_IDS&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> --arg organisation_id &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$ORGANISATION_ID&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> --arg user_type &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$USER_TYPE&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;span class="se">&lt;/span> &lt;span class="s1">&amp;#39;{organisation_id: $organisation_id, user_type: $user_type, users: $user_ids}&amp;#39;&lt;/span> &lt;span class="k">)&lt;/span>
&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$USER_JSON&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="syntax-of-jq">Syntax of jq&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&amp;ndash;raw-input/-R:
&lt;strong>Don&amp;rsquo;t parse the input as JSON&lt;/strong>. Instead, each line of text is &lt;strong>passed to the filter as a &lt;code>string&lt;/code>&lt;/strong>. If combined with &amp;ndash;slurp, then the entire input is passed to the filter as a single long string.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&amp;ndash;null-input/-n:
Don&amp;rsquo;t read any input at all! Instead, the filter is run once using null as the input. This is useful when using jq as a simple calculator or to construct JSON data from scratch.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>input&lt;/code> and &lt;code>inputs&lt;/code>, that read from the same sources (e.g., stdin, files named on the command-line) as jq itself.&lt;/p>
&lt;ul>
&lt;li>&lt;code>input&lt;/code> Outputs one new input.&lt;/li>
&lt;li>&lt;code>inputs&lt;/code> Outputs all remaining inputs, one by one.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="explaination-of-the-process">Explaination of the process&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;code>-R&lt;/code> means jq will treat the anything it gets as a string not a JSON. if you don&amp;rsquo;t use &lt;code>-R&lt;/code> and pass a string as input, it will throw error.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>-n&lt;/code> means jq will not read any input. so it can work together with &lt;code>inputs&lt;/code> to construct a JSON data.&lt;/p>
&lt;ul>
&lt;li>if you do this &lt;code>echo '1\n2\n3' | jq -R '[inputs]'&lt;/code> you will only get &lt;code>[&amp;quot;2&amp;quot;,&amp;quot;3&amp;quot;]&lt;/code>. why? because without &lt;code>-n&lt;/code> jq will read a input, which is &lt;code>1&lt;/code>, then the &lt;code>inputs&lt;/code> will ouputs the &lt;strong>remaining&lt;/strong> inputs, which are &lt;code>2\n3&lt;/code>.&lt;/li>
&lt;li>if you do this &lt;code>echo '1\n2\n3' | jq -Rn '[inputs]'&lt;/code>, you will get &lt;code>[&amp;quot;1&amp;quot;,&amp;quot;2&amp;quot;,&amp;quot;3&amp;quot;]&lt;/code>. why? because with &lt;code>-n&lt;/code> jq will &lt;strong>not&lt;/strong> read a input, so the &lt;code>inputs&lt;/code> will outputs the &lt;strong>remaining&lt;/strong> inputs, which are &lt;code>1\n2\n3&lt;/code>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;code>select(length&amp;gt;0)&lt;/code> for each input, it will filter out the empty input&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>assemble_user(.)&lt;/code> for each input, it will call the def &lt;code>assemble_user&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>def assemble_user($user_id): {&amp;quot;user_id&amp;quot;: $user_id}&lt;/code> for each input like &lt;code>123&lt;/code>, it will return a object like &lt;code>{&amp;quot;user_id&amp;quot;: 123}&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;lt;&amp;lt;&amp;lt;&lt;/code> this symbol means &lt;code>Here string&lt;/code>&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;lt;&amp;lt;&amp;lt;&lt;/code> is known as here-string. Instead of typing in text, you give a pre-made string of text to a program. For example, with such program as bc we can do bc &amp;laquo;&amp;lt; 5&lt;em>4 to just get output for that specific case, no need to run bc interactively. Think of it as the equivalent of echo &amp;lsquo;5&lt;/em>4&amp;rsquo; | bc.&lt;/li>
&lt;/ul>
&lt;p>check the difference between &lt;code>&amp;lt;,&amp;lt;&amp;lt;,&amp;lt;&amp;lt;&amp;lt;&lt;/code> &lt;a href="https://askubuntu.com/questions/678915/whats-the-difference-between-and-in-bash">here&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>--argjson&lt;/code> means it has a JSON data as the argument.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>--arg&lt;/code> means it has a string data as the argument&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>jq -n --argjson user_ids &amp;quot;$USER_IDS&amp;quot; --arg organisation_id &amp;quot;$ORGANISATION_ID&amp;quot; &lt;/code> you can structure a JSON data easily.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="the-result">The result&lt;/h2>
&lt;ul>
&lt;li>So first step I get the array with objects.
&lt;ul>
&lt;li>if you do this quickly&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;2f9921bc-a4c9-419a-b069-f8f23c7727f7\n26bf5cc3-73de-425e-9a6b-b70223387314\n30ac5b4c-f4c6-42c6-901d-e8bdf16464b8&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> jq -Rn &lt;span class="s1">&amp;#39;
&lt;/span>&lt;span class="s1"> def assemble_users($user_id): {&amp;#34;user_id&amp;#34;: $user_id};
&lt;/span>&lt;span class="s1"> [
&lt;/span>&lt;span class="s1"> inputs
&lt;/span>&lt;span class="s1"> | select(length&amp;gt;0)
&lt;/span>&lt;span class="s1"> | assemble_users(.)
&lt;/span>&lt;span class="s1"> ]&amp;#39;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>you will get:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">[&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2f9921bc-a4c9-419a-b069-f8f23c7727f7&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;26bf5cc3-73de-425e-9a6b-b70223387314&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;30ac5b4c-f4c6-42c6-901d-e8bdf16464b8&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Second, I assemble them together as a object. you will get&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;users&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2f9921bc-a4c9-419a-b069-f8f23c7727f7&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;26bf5cc3-73de-425e-9a6b-b70223387314&amp;#34;&lt;/span>
&lt;span class="p">},&lt;/span>
&lt;span class="p">{&lt;/span>
&lt;span class="nt">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;30ac5b4c-f4c6-42c6-901d-e8bdf16464b8&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;span class="p">],&lt;/span>
&lt;span class="nt">&amp;#34;organisation_id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span>
&lt;span class="nt">&amp;#34;user-type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>
&lt;span class="p">}&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>DevOps</title><link>https://jiyongcheng.dev/resource/devops/</link><pubDate>Wed, 22 Sep 2021 09:29:55 +1000</pubDate><guid>https://jiyongcheng.dev/resource/devops/</guid><description>&lt;h1 id="makefile">makefile&lt;/h1>
&lt;ul>
&lt;li>Makefile: &lt;a href="https://makefiletutorial.com/#getting-started">https://makefiletutorial.com/#getting-started&lt;/a>&lt;/li>
&lt;/ul>
&lt;h1 id="git">git&lt;/h1>
&lt;ul>
&lt;li>&lt;a href="https://www.git-scm.com/book/en/v2">https://www.git-scm.com/book/en/v2&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.atlassian.com/git/tutorials/what-is-version-control">https://www.atlassian.com/git/tutorials/what-is-version-control&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>English</title><link>https://jiyongcheng.dev/resource/english/</link><pubDate>Wed, 22 Sep 2021 09:29:55 +1000</pubDate><guid>https://jiyongcheng.dev/resource/english/</guid><description>&lt;p>发音的本质是通过感官（耳朵+眼睛），协助嘴（口腔肌肉），养成正确的发音习惯。 眼（观察口型）+ 耳朵（辩音）+ 嘴（刻意练习）= 漂亮的音&lt;/p>
&lt;ul>
&lt;li>Master spoken english: &lt;a href="https://www.youtube.com/watch?v=ilrPvgs29v0&amp;amp;list=PL9YsEhi5oFAbjsAqP-3b-fAIip98pAsx9&amp;amp;index=3">https://www.youtube.com/watch?v=ilrPvgs29v0&amp;amp;list=PL9YsEhi5oFAbjsAqP-3b-fAIip98pAsx9&amp;amp;index=3&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>